# æˆ°ç•¥è¨­è¨ˆï¼šBounded Context æ·±åº¦è§£æ

![](https://images.unsplash.com/photo-1483286603667-e00f31da5e77?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1191&q=80)
_(source: https://unsplash.com/photos/D6uxeDSylxo)_

å‰é¢æåˆ°ï¼Œæˆ‘å€‘æœƒé‹ç”¨ Bounded Context è®“è™•åœ¨å…¶ä¸­çš„ Domain Model å¯ä»¥ä½¿ç”¨ Ubiquitous Language ä¾†ç·¨å¯«ç¨‹å¼æ¨¡å‹ï¼Œè®“é€™äº›æ¨¡å‹çš„å±¬æ€§èˆ‡è¡Œç‚ºåœ¨ Context å…§å¾—åˆ°å®Œæ•´çš„å«ç¾©ã€‚

ä½†å•é¡Œä¾†äº†ï¼Œæˆ‘å€‘è©²å¦‚ä½•æ‰¾å‡º Bounded Contextï¼Ÿåˆæœ‰ä»€éº¼æ³¨æ„äº‹é …å‘¢ï¼Ÿ

ä»¥ä¸‹è®“æˆ‘ä¾†ç‚ºå„ä½æ­é–‹ Bounded Context ç¥ç§˜çš„é¢ç´—ï¼Œé€™ç¯‡æœƒèšç„¦åœ¨ä»¥ä¸‹å¹¾é»ï¼š

- å¦‚ä½•è¾¨è­˜ Bounded Context
- Bounded Context å¸¸è¦‹è¿·æ€
- Bounded Context çš„å¨åŠ›
- Bounded Context è‘«è˜†è£¡åˆ°åº•æœ‰ä»€éº¼è—¥

---

## å¦‚ä½•è¾¨è­˜ Bounded Context

Bounded Context çš„å¥½è™•é¡¯è€Œæ˜“è¦‹ï¼Œä½†å¦‚ä½•æ‰¾å‡º Bounded Context ä¸¦ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹æƒ…ã€‚å¥½æ¶ˆæ¯æ˜¯é€™ä¸æ˜¯ç§‘å­¸å•é¡Œï¼Œè€Œæ›´åƒæ˜¯è—è¡“èˆ‡è¨­è¨ˆçš„å•é¡Œï¼Œå› æ­¤**æ²’æœ‰æ¨™æº–ç­”æ¡ˆï¼Œç´”çœ‹ç•¶ä¸‹çš„éœ€æ±‚**ï¼Œç”šè‡³ç•¶ä½ ä¹‹å¾Œå°æ–¼ Domain Knowledge æ›´ç†Ÿæ‚‰æ™‚å†ä¾†èª¿æ•´ä¹Ÿå¯ä»¥ã€‚

é€šå¸¸è¾¨è­˜ Bounded Context æœƒç”±å…©é»ä¸‹æ‰‹ï¼šèªæ„èˆ‡æ¥­å‹™èƒ½åŠ›ã€‚

_è¨»ï¼šé€™é‚Šçš„æ¥­å‹™èƒ½åŠ›æ„æ—¨ Business Capabilitiesï¼Œå¯ä»¥æ˜¯ä½œç‚ºä¸€å®¶ä¼æ¥­èƒ½ç²å–æˆåŠŸæ‰€éœ€çš„èƒ½åŠ›ã€è³‡æºã€å°ˆæ¥­ã€‚_

### ç”¨èªè¨€æ„ç¾©çš„å·®åˆ¥åˆ¤åˆ¥

åœ¨ Bounded Context ä¸­æˆ‘å€‘å¯ä»¥ç”¨ Ubiquitous Language ä¾†å‘½åæŸå€‹æ¦‚å¿µï¼Œè€Œå…¶ä¸­çš„ç¨‹å¼ä¹Ÿå¿…é ˆæº–ç¢ºåœ°åæ˜ å‡º Ubiquitous Languageï¼Œå› æ­¤ Bounded Context æœ¬è³ªä¸Šæ˜¯ä¸€å€‹**èªæ„çš„é‚Šç•Œ**ã€‚å°±åƒå‰ä¸€ç¯‡æåˆ°çš„ï¼ŒåŒæ¨£æ˜¯ Accountï¼Œåœ¨éŠ€è¡Œã€éƒ¨è½æ ¼ã€ç¤¾äº¤è»Ÿé«”ä¸­éƒ½æœ‰éå¸¸ä¸ä¸€æ¨£çš„å«ç¾©ã€‚

ç•¶ä½ èƒ½å¤ è—‰ç”±èªæ„çš„æè¿°ä¸€å€‹æ¦‚å¿µçš„ä¸åŒå«ç¾©æ™‚ï¼Œé‚£ä½ å¯èƒ½å°±è¦ç•«å‡ºæ–°çš„ Bounded Context çš„é‚Šç•Œã€‚è—‰ç”±å°‡ä¸åŒå«ç¾©çš„æ¦‚å¿µåˆ†é›¢å‡ºä¸åŒ Bounded Contextï¼Œä½ å¯ä»¥æ›´å®‰å…¨åœ°ä¿è­·ç•Œç·šå…§çš„èªæ„ä¸€è‡´æ€§ã€‚

åŒæ™‚ç•¶å°ˆæ¡ˆåŠŸèƒ½æœ‰ä¿®æ”¹æˆ–æ–°å¢æ™‚ï¼Œä¹Ÿè¦å›é ­é‡æ–°æª¢è¦–æ–°åŠ å…¥çš„èªè¨€èˆ‡ç¾æœ‰ Bounded Context å½¼æ­¤é–“çš„å¥‘åˆåº¦ã€‚å¦‚æœé€™å€‹èªè¨€ç¬¦åˆæŸå€‹ Bounded Context è£¡é¢çš„ Ubiquitous Language å‰‡åŠ å…¥ï¼Œå¦‚æœä¸è¡Œçœ‹æ˜¯è¦åˆ‡å‰² Bounded Context æˆ–æ˜¯å»ºç«‹æ–°çš„ä¹Ÿå¯ä»¥ã€‚

å› æ­¤åœ¨ DDD ä¸­ï¼Œå¦‚æœæœ‰ä¸€å€‹ Bounded Context å«åš Utility ä¾†è™•ç†é›œé …ï¼Œå°±ä»£è¡¨ä½ éœ€è¦å°ä»–åšé€²ä¸€æ­¥çš„åˆ†æäº†ã€‚

ç¸½çµä¸€ä¸‹ï¼Œä¾ç…§èªæ„ä½ å¯ä»¥æ³¨æ„ä»¥ä¸‹ä¸‰é»ï¼š

1. æ³¨æ„é‚£äº›æ¦‚å¿µç›¸è¿‘æˆ–å¸¸ä¸€èµ·å‡ºç¾çš„å­—å½™æˆ–å¥å­
2. æ³¨æ„é‚£äº›æ“æœ‰ç›¸è¿‘æ¦‚å¿µæˆ–ç›¸åŒåç¨±ä½†åœ¨ä¸åŒæƒ…å¢ƒä¸‹æœ‰æ­§ç•°çš„å­—å½™æˆ–å¥å­
3. ç•¶ä½ ç™¼ç¾ä½ åœ¨é‡è¤‡ä½¿ç”¨å…¶ä»– Bounded Context çš„èªè¨€æ™‚è«‹æ€è€ƒå…¶å¿…è¦æ€§ï¼Œæˆ–è¨±æ ¹æœ¬ä¸éœ€è¦æ–°çš„ Bounded Contextï¼Ÿ

### æ³¨é‡æ¥­å‹™èƒ½åŠ›å‹éè³‡æ–™åˆ†é¡

åœ¨è¨­è¨ˆ Bounded Context åˆæœŸå¸¸å‡ºç¾ä¸€å€‹è¿·æ€ï¼Œé‚£å°±æ˜¯è¦ä¾ç…§ã€Œå¯¦éš›çš„æ±è¥¿ã€å¦‚é¡§å®¢ã€è¨‚å–®ã€å•†å“å»åˆ† Bounded Contextã€‚æˆ‘å€‘å†æ¬¡å¼·èª¿ï¼ŒDDD çš„ç›®çš„ä¸æ˜¯ç‚ºè³‡æ–™åº« table å»ºæ¨¡å‹è€Œæ˜¯**ç‚ºç³»çµ±çš„è¡Œç‚ºè½‰å»ºç«‹ç¨‹å¼æ¨¡å‹**ã€‚å¦‚æ­¤ä¸€ä¾†å»ºç«‹çš„æ¨¡å‹æ‰èƒ½è¡¨é”å‡ºå•†æ¥­éœ€æ±‚çš„ä»¥åŠæ ¸å¿ƒé‚è¼¯ã€‚

ç”šè‡³é‚„æœ‰ä¸€æ´¾ä¸»å¼µ Bounded Context æœ€å¥½[ç”¨å‹•è©åšå‘½å](https://www.youtube.com/watch?v=NXDCkpD74mE)ä¾†æè¿°è¡Œç‚ºã€‚

å¾ˆå¤šå°ˆæ¡ˆä¸€é–‹å§‹ä½¿ç”¨å¯¦é«”çš„ç‰©ä»¶åšè¨­è¨ˆï¼Œé€™éº¼ä¸€ä¾†å®¹æ˜“é€ æˆç‰©ä»¶ä¹˜è¼‰å¤ªå¤šçš„è²¬ä»»èˆ‡é‡ç–Šçš„åŠŸèƒ½ï¼Œæ¯”å¦‚èªªã€Œé¡§å®¢ã€æ˜¯å±¬æ–¼ã€Œæœƒå“¡ç®¡ç†ç³»çµ±ã€é‚„æ˜¯å±¬æ–¼ã€Œè³¼ç‰©ç³»çµ±ã€ï¼Ÿ

å…¶å¯¦åŒæ¨£æ˜¯é¡§å®¢çš„è³‡æ–™ä½¿ç”¨æƒ…å¢ƒå»å¤§ä¸ç›¸åŒï¼Œå¦‚æœå–®ç´”ç”¨è³‡æ–™çš„æ¦‚å¿µå»å®šç¾©ï¼Œæœ€å¾Œä¸€å®šæœƒé•·å‡ºä¸€å€‹è‚¥å¤§ä¸”é›£ç”¨çš„ Bounded Contextã€‚

èˆ‰å€‹ä¾‹å­ï¼Œä¾ç…§æ¥­å‹™èƒ½åŠ› (business capabilities)æˆ‘å€‘éœ€è¦æœ‰æœƒå“¡ç®¡ç†ã€å•†å“ç›®éŒ„ã€è¨‚å–®ã€ç‰©æµã€é‡‘æµç­‰ç­‰åŠŸèƒ½ã€‚è€Œé¡§å®¢å¾—æ¦‚å¿µåœ¨ä¸åŒ bounded context ä¸­æœ‰ä¸åŒçš„è¡Œç‚ºã€è·è²¬ç”šè‡³æ˜¯ä¸åŒçš„åç¨±ï¼Œå¦‚ä¸‹ï¼š

- [æœƒå“¡ç®¡ç† Bounded Context] æœƒå“¡ Member = åå­—ã€å€‹äººè³‡æ–™ã€æœƒå“¡ç­‰ç´šã€æœƒå“¡ç´…åˆ©é»æ•¸
- [ç€è¦½ç”¢å“ç›®éŒ„ Bounded Context] ç€è¦½è€… viewer = å…ˆå‰è³¼è²·ç´€éŒ„ã€å¿ èª åº¦ã€å¯è²·å•†å“ã€æŠ˜æ‰£
- [è¨‚å–® Bounded Context] è²·å®¶ Buyer = åå­—ã€è¨‚å–®è¨˜éŒ„
- [ç‰©æµ Bounded Context] æ”¶è²¨äºº Receiver = åå­—ã€è¯çµ¡æ–¹å¼ã€åœ°å€ã€å…¶ä»–è¡“èª
- [é‡‘æµ Bounded Context] ä»˜æ¬¾äºº Payer = åå­—ã€ä¿¡ç”¨å¡å¾Œå››ç¢¼

äº‹å¯¦ä¸Šï¼Œæ‹†åˆ† Bounded Context æ™‚ï¼Œå¾ˆå¸¸æœƒæŠŠ**åŒä¸€æ¦‚å¿µæ‹†åˆ†åœ¨ä¸åŒåŠŸèƒ½çš„ Bounded Context**

å¯ä»¥åƒç…§é€™ç¯‡éå¸¸æœ‰ç”¨çš„å•ç­”ï¼š[Who owns the Orders in a consumer-provider marketplace like platform?](https://softwareengineering.stackexchange.com/questions/366214/who-owns-the-orders-in-a-consumer-provider-marketplace-like-platform)

ä¸éä¾ç…§æ¥­å‹™èƒ½åŠ›å€åˆ†æœ‰æ™‚ä¹Ÿæœƒæœ‰èª¤å€ï¼Œå› ç‚ºä»–å¯èƒ½ç„¡æ³•å®Œç¾å¾—ç¬¦åˆ Subdomain çš„é‚Šç•Œã€‚

èˆ‰å€‹ä¾‹å­ï¼Œä¸€å€‹é›»å•†ç³»çµ±å¸¸æœƒæœ‰å‰å°å¾Œå°ä¹‹åˆ† (storefront vs admin) ï¼Œå¦‚æœä»¥ç³»çµ±å•†æ¥­èƒ½åŠ›ä¾†çœ‹ï¼Œå¾ˆå®¹æ˜“åˆ†å‡ºã€Œå‰å°ã€ã€ã€Œå¾Œå°ã€å…©å€‹ Bounded Context ï¼Œä½†äº‹å¯¦çœŸæ˜¯å¦‚æ­¤å—ï¼Ÿæˆ‘æƒ³ä»¥å¾Œç«¯ä¾†èªªï¼ŒæŠŠç³»çµ±æˆ–æ˜¯åœ˜éšŠåˆ‡æˆå‰å¾Œå°ä¼¼ä¹ä¸æ˜¯å¾ˆæ˜æ™ºï¼Œå› ç‚ºå…©è€…ä¹‹é–“æœ‰å¾ˆå¤šæ¦‚å¿µæ˜¯å…±ç”¨çš„ï¼Œå®¹æ˜“å°è‡´è¤‡é›œçš„ä¾è³´æ€§ã€‚

å¦å¤–æ¥­å‹™èƒ½åŠ›æœ‰æ™‚ä¹Ÿèˆ‡çµ„ç¹”æ¶æ§‹æœ‰é—œï¼Œç”šè‡³æœ€å¾Œè®“ Bounded Context è¢«çµ„ç¹”æ¶æ§‹ç¶æ¶ï¼šå› ç‚ºçµ„ç¹”æœ‰éŠ·å”®åœ˜éšŠã€å®¢æœåœ˜éšŠæ‰€ä»¥å°±å°‡é€™å€‹æ¶æ§‹æ˜ ç…§åˆ° Bounded Context ä¸Šã€‚

### å°æ–¼è³‡æ–™çš„æŒæ§åº¦èˆ‡ä¾è³´æ€§

é€šå¸¸å¥½çš„ç³»çµ±æœƒè¦æ±‚ä¿æœ‰ Autonomy (è‡ªæ²»æ€§)ï¼Œä¹Ÿå°±æ˜¯åœ¨ç›¸ç•¶ç¨‹åº¦ä¸Šæ¸›å°‘å½¼æ­¤çš„ä¾è³´ã€‚é€™å€‹ä¾è³´ä¸åƒ…æ˜¯é‚è¼¯ä¸Šçš„ä¾è³´ï¼ŒåŒæ™‚ä¹ŸåŒ…å«åº•å±¤å¦‚è³‡æ–™å­˜å„²çš„ä¾è³´ã€‚
ç†æƒ³ä¸Šæˆ‘å€‘æœƒå¸Œæœ›æ¯å€‹ç³»çµ±ä¿æœ‰è‡ªå·±çš„è³‡æ–™åº«ä¸è¢«å¤–éƒ¨æ±¡æŸ“ï¼Œå› æ­¤è³‡æ–™çš„æŒæ§åº¦ä¹Ÿå¯ä»¥åšç‚º Bounded Context çš„è¾¨åˆ¥ä¾æ“šã€‚

ä¸€å€‹ Bounded Context å¿…é ˆæ“æœ‰è‡ªå·±è³‡æ–™çš„å®Œå…¨æŒæ§æ¬Šã€‚ç•¶ä¸€å€‹è³‡æ–™ä¸å®Œå…¨å±¬æ–¼é€™å€‹ Bounded Context æ™‚ï¼Œå°±å¯ä»¥è€ƒæ…®æ‹†åˆ†å‡ºå»ã€‚

æ¯”å¦‚ä¸€é–‹å§‹ä¸€å€‹å–®ç´”çš„è³¼ç‰© Bounded Context åƒ…éœ€è¦è®“ä½¿ç”¨è€…ç™»å…¥ä¸¦è³¼ç‰©ï¼Œä½†ä¹‹å¾ŒåŠ å…¥äº†æœƒå“¡ç­‰ç´šèˆ‡é—œä¿‚åˆ¶åº¦ï¼Œä¸€å€‹æœƒå“¡å¯ä»¥å‡ç´šæˆ VIP ã€VVIP ç­‰ç­‰ç”šè‡³å¯ä»¥å‡ç´šæˆè¯ç›Ÿè¡ŒéŠ·å¤¥ä¼´ã€‚æ­¤æ™‚è³¼ç‰© Bounded Context é¡¯ç„¶å°±ä¸é©åˆæ“ä½œå¦‚æ­¤è¤‡é›œçš„ä½¿ç”¨è€…è³‡æ–™ï¼Œå› æ­¤å°±å¯ä»¥è€ƒæ…®ç¨ç«‹åˆä¸€å€‹èº«ä»½ç®¡ç†çš„ Bounded Context å°ˆé–€ç®¡ç†é€™é¡è³‡æ–™ã€‚ç•¶è³¼ç‰© Bounded Context éœ€è¦ç›¸é—œæ¬Šé™é©—è­‰æ™‚ï¼Œå†è·Ÿèº«ä»½ç®¡ç† Bounded Context è¦è³‡æ–™å³å¯ã€‚

### æ ¹æ“šç¾æœ‰åœ˜éšŠæˆ–å°ˆæ¡ˆ

ç•¶ç„¶ï¼Œç†æƒ³å¾ˆè±æ»¿ï¼Œç¾å¯¦æ˜¯å¾ˆéª¨æ„Ÿçš„ã€‚Bounded Context çš„è¨­è¨ˆä¹Ÿè¦è€ƒé‡ç¾å¯¦å› ç´ ï¼Œå…¶ä¸­ä¹‹ä¸€å°±æ˜¯çµ„ç¹”æ¶æ§‹ã€‚å°±å¦‚åŒ Conway Laws æ‰€èªªï¼š

> Any organization that designs a system (defined broadly) will produce a design whose structure is a copy of the organization's communication structure.
> è»Ÿé«”çµ„ç¹”çš„åœ˜éšŠé‚Šç•Œæ±ºå®šç³»çµ±é‚Šç•Œã€‚  
> â€”â€‰M. Conway

å¦å¤–ä¹Ÿéœ€è¦è€ƒé‡åˆ°æ—¢æœ‰çš„ Legacy Systemã€‚è‹¥æ˜¯é€™å€‹ Legacy System å·²ç¶“æ˜¯é¢ç›®å…¨éï¼Œé‚£éº¼å¸¸è¦‹çš„ä½œæ³•æ˜¯å°‡ Legacy System ç¨ç«‹æˆä¸€å€‹ Bounded Context ï¼Œä¸¦å»ºç«‹å¤šå€‹ Adapter å»é€£æ¥å¤–éƒ¨æ–°å»ºç«‹çš„ Bounded Contextã€‚

åŒæ™‚ä¹Ÿè¦ç›¡é‡æ¸›å°‘åœ˜éšŠé–“çš„ä¾è³´é—œä¿‚ï¼Œé”åˆ°æ›´é«˜çš„è‡ªæ²»æ€§ã€‚

### Bounded Context çš„å¤§å°

Bounded Context æ²’æœ‰ä¸€å®šçš„å¤§å°ï¼Œä¸»è¦é‚„æ˜¯ä»¥èªæ„èˆ‡æ¥­å‹™èƒ½åŠ›åšåˆ¤æ–·ã€‚åœ¨å°ˆæ¡ˆå‰›å•Ÿå‹•æ™‚ï¼Œå•†æ¥­é‚è¼¯ç›¸å°ç°¡å–®ï¼Œé€šå¸¸ä¸ç”¨å¤ªå¤š Bounded Context å°±å¯ä»¥å®Œæˆå¤§éƒ¨åˆ†çš„éœ€æ±‚ä¸”ä¸ç ´å£å…§éƒ¨é ˜åŸŸæ¦‚å¿µçš„å®Œæ•´æ€§ã€‚

é›–ç„¶æ²’æœ‰ä¸€å®šçš„å¤§å°ï¼Œä½†ä¹Ÿè¦å°å¿ƒä¸è¦åœ¨å°ˆæ¡ˆæˆé•·éç¨‹ä¸­è®“å¤–éƒ¨æ¦‚å¿µå·å·æºœäº†é€²å»ã€‚é€™å°¤å…¶å®¹æ˜“ç™¼ç”Ÿåœ¨ä¸²æ¥å¤–éƒ¨ç³»çµ±(ex: é‡‘ç‰©æµ) æ™‚ï¼Œæœªç¶“æ€è€ƒå°±å°‡å¤–éƒ¨çš„èªè¨€æ”¾é€²è‡ªå·±çš„ Bounded Contextï¼Œå°è‡´æ—¥å¾Œä½ é–‹ç™¼ä¸€ä»½ç¨‹å¼éœ€è¦çœ‹å…©ä»½ä»¥ä¸Šçš„æ–‡ä»¶(åˆ¥äººçš„ä¹Ÿè¦çœ‹!)ã€‚

## Bounded Context å¸¸è¦‹è¿·æ€

### è¿·æ€ä¸€ï¼šä¸€æ¬¡å°±è¦åˆ†å®Œ

äº‹å¯¦ä¸Šå¤§å¤šæ•¸ç³»çµ±ä¸€é–‹å§‹å¯èƒ½åªæœƒæœ‰ä¸€å€‹ Bounded Context æˆ–æ˜¯æ¥­å‹™è¤‡é›œåº¦ä¸è¶³ä»¥åˆ†å‡ºå¤šå€‹ Bounded Context ã€‚

### è¿·æ€äºŒï¼šæ ¹æ“šæŠ€è¡“æ¶æ§‹åˆ† Bounded Context

æ¯”å¦‚èªª Databaseã€Infrastructure åˆ†ç‚ºä¸€å€‹ Bounded Context å°±ä¸å¤ªåˆé©ã€‚
æˆ–æ˜¯é‹ç”¨æ¶æ§‹å±¤å»åˆ†å¦‚ Use Case å±¤ã€ Controller å±¤ã€ Domain å±¤æˆ–æ˜¯å¤–éƒ¨æ¡†æ¶ç­‰ç­‰éƒ½ä¸åˆé©ã€‚

### è¿·æ€ä¸‰ï¼šæ ¹æ“šé–‹ç™¼ä»»å‹™æ‹†åˆ† Bounded Context

ä»Šå¤©å‡å¦‚æœ‰ä¸€å€‹æ–°çš„åŠŸèƒ½éœ€æ±‚é€²ä¾†ï¼Œä¸ä»£è¡¨ä»–å°±å¯ä»¥ç¨ç«‹é–‹ä¸€å€‹ Bounded Context å‡ºä¾†ã€‚
é›–ç„¶æœ‰äº›äººä¸»å¼µ Bounded Context è¶Šå°è¶Šæ•æ·(?)ï¼Œä½†ç•¶ Bounded Context èªæ„çš„å®Œæ•´æ€§è¢«æ‰“ç ´æ™‚ï¼Œå°±æ˜¯ç•™ä¸‹æŠ€è¡“å‚µå¾…æœªä¾†è§£æ±ºã€‚

### è¿·æ€å››ï¼šBounded Context èˆ‡å¾Œç«¯/æŠ€è¡“åœ˜éšŠçµ„ç¹”ç„¡é—œ

By Conwey Law: è»Ÿé«”çµ„ç¹”çš„åœ˜éšŠé‚Šç•Œæ±ºå®šç³»çµ±é‚Šç•Œ => Bounded Context ä¹Ÿæˆç‚ºäº†ä¸€å€‹æ±ºå®šåœ˜éšŠé‚Šç•Œçš„å¥½æ–¹å¼ï¼Œå°æ–¼è·¨åœ‹åœ˜éšŠæ›´æœ‰åˆ©ã€‚

## Bounded Context çš„å¼·å¤§å¨åŠ›

### æ¦‚å¿µä¸æ··æ·†ã€å‘½åä¸ç”¨æ€•

æœ‰äº† Bounded Contextã€‚

æœ‰ä¸€å€‹æˆ‘éå¸¸å®³æ€•çš„åè©å«åš `User`ï¼Œå› ç‚ºä»–ç°¡ç›´åŒ…å±±åŒ…æµ·ã€‚ä»–å¯ä»¥æ˜¯ Admin ä¹Ÿå¯ä»¥æ˜¯ä¸€èˆ¬ä½¿ç”¨è€…ã€‚ç”šè‡³ `User` ä¸€è©ç”šè‡³å¯ä»¥ä¸ç”¨æ˜¯å¯¦é«”ç”¨æˆ¶è€Œæ˜¯å¦ä¸€å®¶å…¬å¸çš„ç³»çµ±ã€‚

ç•¶ä½ ç”¨ä¸€å€‹ User æ‰“å¤©ä¸‹æ™‚ï¼Œç”±æ–¼æ¦‚å¿µæ··æ·†åœ¨ä¸€èµ·ï¼Œç”šè‡³å®¹æ˜“ç”¢ç”Ÿå®‰å…¨ç–‘æ…®ï¼ŒéŒ¯èª¤åˆ¤æ–·æ¬Šé™ã€‚

### èº«ä»½èªè­‰

å‰é¢è¬›åˆ°äº† `user` çš„æ¬Šé™å•é¡Œï¼Œç›¸ä¿¡å¤§å®¶å¤šå°‘éƒ½é‡éæ¬Šé™åˆ¤æ–·çš„é›£é¡Œã€‚ç•¶ä½ å› ç‚º Bounded Context è€Œåˆ†å‡ºä¸€å¥—ç³»çµ±æ™‚ã€‚

> åˆ°åº•æ¬Šé™åˆ¤æ–·è¦åœ¨å“ªè£¡åšï¼Ÿ

åƒæ˜¯é€²å»åŠ‡é™¢ï¼Œæœ‰å…©ç¨®æ¨¡å¼ï¼š

1. å”®ç¥¨å“¡åœ¨å…¥å£è™•å¹«ä½ æŸ¥ç¥¨å¾Œè®“ä½ é€²å»ï¼Œä¿¡ä»»ä½ è‡ªå·±é€²å»å¾Œæ‰¾å¥½ä½å­ã€‚
2. ä¸€æ¨£å…¥å£æŸ¥ç¥¨ï¼Œä½†ä½ æ¯èµ°ä¸Šä¸€å€‹éšæ¢¯éƒ½æœƒæœ‰äººè·³å‡ºä¾†å†æŸ¥ç¥¨ä¸€æ¬¡ã€‚

ç›¸ä¿¡å¤§å®¶éƒ½è¦ºå¾—ç¬¬äºŒå€‹æ¨¡å¼å¾ˆè ¢ï¼Œä½†å¾ˆå¤šé­åˆ°ä¸ç•¶é‡ç”¨çš„ç¨‹å¼å°±æ˜¯é€™æ¨£å­è·‘çš„ï¼
ç•¶ä½ ä»Šå¤©é‹ç”¨ Bounded Context çš„æ¦‚å¿µå°‡ä¸åŒå•†æ¥­åŠŸèƒ½é‡æ¸…å¾Œï¼Œè‡ªç„¶å°±åƒæ¨¡å¼ä¸€ä¸€æ¨£è¼•é¬†è‡ªåœ¨ã€‚

é‚£ä½ èªªå¦‚æœé€²å»å¾Œé‚„äº‚åä½å­å‘¢ï¼Ÿ...æˆ‘æƒ³é€™æ˜¯ç¨‹å¼çš„ BUGï¼Œæ”¾åˆ°æ¨¡å¼äºŒä¹Ÿä¸æœƒæ¯”è¼ƒå¥½ï¼Œè«‹å¿«é»ä¿®å¥½ã€‚

### å¯ä»¥ç”¨ä¾†æ‹†åˆ† Microservice

Bounded Context çš„å¤©ç„¶é‚Šç•Œå°±æ˜¯å®Œç¾çš„ç³»çµ±é‚Šç•Œï¼Œéå¸¸é©åˆä½œç‚º Microservice çš„åŠƒåˆ†ã€‚

å¯ä»¥åƒè€ƒ Kim å“¥çš„ç¶“å…¸æ¼”è¬›ï¼š[2019 03-23-2nd-meetup-essential capabilities behind microservices](https://www.slideshare.net/kimKao/2019-03232ndmeetupessential-capabilities-behind-microservices-137920646)

ä¸éé€™é‚Šéœ€è¦é‡æ¸…ä¸€é»ï¼Œ**Bounded Context å¯ä»¥æ˜¯ Microservice ï¼ŒMicroservice ä¸å®Œå…¨æ˜¯ Bounded Context**ã€‚
å‰é¢æåˆ°ï¼ŒBounded Context æ˜¯ä¸€å€‹å•†æ¥­åŠŸèƒ½çš„é‚Šç•Œï¼Œè€Œ Microservice ç›®çš„å‰‡æ˜¯å°‡ç¨‹å¼åŠŸèƒ½æŠ½å‡ºä¾†ã€‚æ‰€ä»¥ä¸€å€‹ Bounded Context å¯ä»¥åšæˆä¸€å€‹ Microserviceï¼Œä½†ä¹Ÿæœ‰å¯èƒ½å¾åˆåˆ†å‡ºå¤šå€‹ Microservice ã€‚
å› æ­¤ä¸€å€‹ Microservice çš„é‚Šç•Œä¸ä¸€å®šæœƒç­‰æ–¼ Bounded Contextã€‚

### å¯ä»¥ç”¨ä¾†åˆ†é…åœ˜éšŠä»»å‹™

[Patterns, Principles, and Practices of Domain-Driven Design \*](https://www.tenlong.com.tw/products/9781118714706?list_name=srh)çš„ä½œè€…ä¹‹ä¸€ Nick Tune åœ¨é€™éƒ¨å¾ˆæ£’çš„æ¼”è¬›æåˆ°ï¼ŒBounded Context ä¹Ÿå¾ˆé©åˆç”¨ä¾†æ‹†åˆ†åœ˜éšŠï¼Œå°¤å…¶é©åˆå¤§çµ„ç¹”ç”šè‡³æ˜¯è·¨åœ‹åœ˜éšŠã€‚

æƒ³æƒ³çœ‹ï¼Œå¦‚æœä½ ä»Šå¤©æŠŠåœ˜éšŠåˆ†ç‚ºå‰ç«¯è·Ÿå¾Œç«¯ï¼Œä¸€å€‹åœ¨å°åŒ—ï¼Œä¸€å€‹åœ¨é«˜é›„ï¼Œé‚£å‡ºäº†ä¸€å€‹è¨‚å–®å•é¡Œçš„ Bug è©²ä¸æœƒé‚„è¦æ­é«˜éµä¾†å›å§ï¼Ÿ

## Bounded Context è‘«è˜†è£¡æœ‰ä»€éº¼è—¥

åŸºæœ¬ä¸Š Bounded Context ä¸åªæ˜¯èªæ„é‚Šç•Œï¼Œæœ‰æ™‚ä¹Ÿå¯ä»¥ä½œç‚ºæŠ€è¡“çš„é‚Šç•Œã€‚æ¯”å¦‚ä¸€å€‹ Database table è‹¥æ˜¯èˆ‡ Domain Model ç·Šå¯†é—œè¯ï¼Œé‚£ä¹Ÿå¯ä»¥æŠŠä»–çš„ Schema æ”¾é€² Bounded Context ä¸­ã€‚æ­¤å¤–è‹¥æ˜¯ UI ç¬¦åˆ Bounded Context çš„é‚Šç•Œï¼Œä¹ŸåŒæ¨£å¯ä»¥æ”¾é€²ä¾†ï¼Œåªæ˜¯è¦æ³¨æ„ [Smart UI Pattern](https://www.fastman.com/design-patterns-smart-ui/)

æ­¤å¤–ï¼Œé€£ä½ é–‹æ”¾çš„ web interface å¦‚ REST ç­‰éƒ½å¯ä»¥æ”¾åœ¨ Bounded Contextï¼Œ**åªè¦ä»–èƒ½ç¬¦åˆ Ubiquitous Language**ã€‚

ç¸½çµä¾†èªªï¼Œåªè¦ä»–ç¬¦åˆ Ubiquitous Languageï¼Œä¸€å€‹ Bounded Context å¯ä»¥åŒ…å«ä¸€å€‹ç³»çµ±ã€ä¸€å€‹æ‡‰ç”¨ç¨‹å¼æˆ–æ˜¯ä¸€ç¨®æ¥­å‹™æœå‹™ã€‚

### åœ¨ Tactical Design ä¸­å‘ˆç¾

æ¥è‘—è®“æˆ‘å€‘ä¾†çœ‹çœ‹ï¼Œè‹¥æ˜¯ä»¥ Tactical Design ä¸­çš„å„å€‹è¨­è¨ˆæ¨¡å¼ (Entityã€Value Objectã€Aggregateã€Domain Event)çš„ Domain Object æ‡‰ç”¨åœ¨ Bounded Context æœƒé•·æ€æ¨£ï¼š

ä»¥ä¸Šé¢çš„é›»å•†ç‚ºä¾‹ï¼Œä»¥ä¸‹åˆ†æˆä¸‰å€‹ Bounded Contextï¼Œåˆ†åˆ¥ç‚º Catalog (å•†å“ç›®éŒ„)ã€Purchase (è³¼è²·)ã€Identity (èº«ä»½ç®¡ç†)ã€‚

![](https://i.imgur.com/IaMnfVN.png)

ä»¥åŠåœ¨å°ˆæ¡ˆçµæ§‹æœƒåƒé€™æ¨£ï¼š

```
e-commerce
â”œâ”€â”€ catalog
â”‚Â Â  â”œâ”€â”€ applicationService
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ AddProduct.ts
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ DeleteProduct.ts
â”‚Â Â  â”‚Â Â  â””â”€â”€ UpdateProduct.ts
â”‚Â Â  â”œâ”€â”€ domain
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ event
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ProductCreated.ts
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ ProductUpdated.ts
â”‚Â Â  â”‚Â Â  â””â”€â”€ model
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ Product.ts
â”‚Â Â  â”‚Â Â      â””â”€â”€ Viewer.ts
â”‚Â Â  â””â”€â”€ infrastructure
â”œâ”€â”€ identity
â”‚Â Â  â”œâ”€â”€ applicationService
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ MemberLogin.ts
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ MemberLogout.ts
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ MememberUpdate.ts
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ RegisterMember.ts
â”‚Â Â  â”‚Â Â  â””â”€â”€ UpdateContract.ts
â”‚Â Â  â”œâ”€â”€ domain
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ event
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ ContractUpdated.ts
â”‚Â Â  â”‚Â Â  â””â”€â”€ model
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ Admin.ts
â”‚Â Â  â”‚Â Â      â””â”€â”€ Member.ts
â”‚Â Â  â””â”€â”€ infrastructure
â””â”€â”€ purchase
    â”œâ”€â”€ applicationService
    â”‚Â Â  â””â”€â”€ PlaceOrder.ts
    â”œâ”€â”€ domain
    â”‚Â Â  â”œâ”€â”€ event
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ OrderClosed.ts
    â”‚Â Â  â”‚Â Â  â””â”€â”€ OrderPaid.ts
    â”‚Â Â  â””â”€â”€ model
    â”‚Â Â      â””â”€â”€ Order.ts
    â””â”€â”€ infrastructure
```

## ğŸ“ Summary

Bounded Context åŸå…ˆå°±æ˜¯å¾èˆ‡é ˜åŸŸå°ˆå®¶æºé€šå¾—ä¾†çš„çŸ¥è­˜æ‰€å»ºæ§‹å‡ºçš„é‚Šç•Œï¼Œå› æ­¤ä¸é›£ç†è§£ä»–æœƒæ˜¯ä¸€å€‹èªæ„çš„é‚Šç•Œï¼å› æ­¤åœ¨æ€è€ƒ Bounded Context æ™‚ï¼Œè«‹é–‹ç™¼äººå“¡å…ˆå±æ£„æŠ€è¡“ç´°ç¯€çš„æ¢ç©¶ï¼Œä»¥è»Ÿé«”çš„æ¥­å‹™åŠŸèƒ½ç‚ºå„ªå…ˆã€‚
Bounded Context ç‚ºç³»çµ±é–“æä¾›äº†çµ•ä½³çš„é‚Šç•Œï¼Œä¸ç®¡æ˜¯å¦ä¹‹å¾Œæœ‰æ²’æœ‰æ¡ç”¨ Tactical Design ï¼Œå°æ–¼æˆé•·ä¸­çš„è»Ÿé«”æœå‹™éƒ½æ˜¯éå¸¸å¯¦ç”¨çš„ã€‚

ç•¶æˆ‘å€‘æ‹†åˆ†å‡º Bounded Context å¾Œï¼Œæˆ‘å€‘ä¹Ÿéœ€è¦ç†è§£å¦‚ä½•é€£çµä½¿ç”¨ä»–å€‘ã€‚ä¸‹ä¸€ç¯‡æœƒä¾†ä»‹ç´¹å¹¾å€‹å¸¸è¦‹çš„ Bounded Context åˆä½œæ¨¡å¼ï¼Œåˆç¨± context mappingã€‚

Bounded Context çš„å¨åŠ›å¾ˆå¤§ï¼Œä½†æœ‰æ™‚å€™æŠ•å…¥çš„æˆæœ¬ä¸ä¸€å®šåŒ¹é…ç²å¾—çš„æˆæœã€‚å¾ˆå¤šæ™‚å€™æ˜¯å› ç‚ºçµ„ç¹”æ¶æ§‹çš„é—œä¿‚ï¼Œæ ¹æ“šé€™ç¯‡[The Art of Discovering Bounded Contexts by Nick Tune](https://www.youtube.com/watch?v=ez9GWESKG4I) è¬›è€…æ‰€èªªï¼ŒBounded Context æœ€å¾Œå…¶å¯¦æ˜¯æŒ‘æˆ°çµ„ç¹”çš„åˆ†å·¥ï¼Œç•¶çµ„ç¹”è¶Šä¾†è¶Šå¤§æ™‚ï¼Œè‹¥åˆ†å·¥è¶Šè²¼è¿‘ Bounded Context è¶Šå®¹æ˜“ç®¡ç†ï¼Œä½†å¤§å®¶éƒ½çŸ¥é“ï¼Œäººçš„å•é¡Œå¾€å¾€æ¯”ç¨‹å¼æ›´è¤‡é›œã€‚

å¸¸è¦‹ä¸€å€‹å•é¡Œï¼š Subdomain èˆ‡ Bounded Context å·®åˆ¥åœ¨å“ªè£¡ï¼Ÿ
é€™ä»¶äº‹å¯ä»¥èªªæ˜¯ DDD çš„ç„å­¸ä¹‹ä¸€ï¼Œè‡³ä»Šéƒ½æ²’æœ‰ä¸€å€‹ä»¤å¤§å®¶éƒ½ä¿¡æœçš„å›ç­”ã€‚æœ‰ä¸€æ´¾èªç‚ºå…©è€…å¾ˆå¤šæ™‚å€™æ˜¯è§’åº¦å•é¡Œã€ç„¡æ³•ä¸€åˆ€åˆ‡ä¹¾æ·¨ï¼Œå› æ­¤èˆ‡å…¶åˆ†é‚£éº¼ç´°ï¼Œå¤§å®¶éƒ½ç•¶ä½œ Bounded Context è¨è«–å°±å¥½äº†ã€‚

è€Œæˆ‘è‡ªå·±æ˜¯èªç‚ºé‚„æ˜¯å¯ä»¥åˆ†å‡ºå…©è€…ï¼Œå°‡ Subdomain è¦–ä½œä¸€å€‹ç± çµ±çš„å¤§éœ€æ±‚ï¼Œåƒè¬ä¸è¦èŠ±å¤ªå¤šæ™‚é–“åœ¨ä¸Šé¢ï¼Œæ‰¾å‡ºæ ¸å¿ƒã€å¤§è‡´å€åˆ†é»åˆ°ç‚ºæ­¢ã€‚è€Œé€²åˆ° Bounded Context æ‰æœƒé–‹å§‹è¨è«–åŠŸèƒ½ç´°ç¯€ï¼Œé€™è£¡æ‰æ˜¯å°‡ä½¿ç”¨æ¡ˆä¾‹ã€ Ubiquitous Language ç™»å ´çš„æœ€ä½³æ™‚æ©Ÿï¼Œä¹Ÿæ˜¯æœ€è€—ç¥çš„åœ°æ–¹ã€‚

èˆ‰ä¾‹ï¼Œé›»å•†è€Œè¨€ï¼Œå°±æ˜¯è¦å¯ä»¥ã€Œè²·æ±è¥¿ã€ã€ã€Œç®¡åº«å­˜ã€ï¼Œå› æ­¤å°±æœƒç”Ÿå‡ºå…©å€‹ Subdomain ï¼Œä¸¦æŠŠã€Œè²·æ±è¥¿ã€ä½œç‚º Core Domain ã€‚æ¥è‘—è¨‚å–®ç®¡ç†ã€é‡‘ç‰©æµã€ç™¼ç¥¨ã€åº«å­˜ç®¡ç†ã€è³‡æºç®¡ç†ç­‰ç­‰åŠŸèƒ½å°±å„è‡ªæˆç«‹ Bounded Context ç„¶å¾Œå¡«å…¥ä»¥ä¸Š Subdomain ä¸­ã€‚ç•¶å€‹åˆ¥ Subdomain éæ–¼å·¨å¤§æˆ–è¤‡é›œæ™‚å†è€ƒæ…®æ‹†åˆ†ä»–ã€‚

## Resources

- [Context is King: Finding Service Boundaries](https://dev.to/codeopinion/context-is-king-finding-service-boundaries-4mob)
- [Focus on Service Capabilities, not Entities](https://codeopinion.com/focus-on-service-capabilities-not-entities/)
- [Modelling Bounded Contexts with the Bounded Context Design Canvas: A Workshop Recipe](https://medium.com/nick-tune-tech-strategy-blog/modelling-bounded-contexts-with-the-bounded-context-design-canvas-a-workshop-recipe-1f123e592ab)
- [Who owns the Orders in a consumer-provider marketplace like platform?](https://softwareengineering.stackexchange.com/questions/366214/who-owns-the-orders-in-a-consumer-provider-marketplace-like-platform)
